"use strict";(self["webpackChunkVStyle"]=self["webpackChunkVStyle"]||[]).push([[220],{7816:function(e,a,t){t.d(a,{A:function(){return d}});var n=t(6768),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 533h-48.1c-4.2 0-7.8 3.2-8.1 7.4C604 589.9 562.5 629 512 629s-92.1-39.1-95.8-88.6c-.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 00-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 00-8-8.4z"}}]},name:"smile",theme:"outlined"},r=o,i=t(4827);function l(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?Object(arguments[a]):{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(a){s(e,a,t[a])}))}return e}function s(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var c=function(e,a){var t=l({},e,a.attrs);return(0,n.bF)(i.A,l({},t,{icon:r}),null)};c.displayName="SmileOutlined",c.inheritAttrs=!1;var d=c},3910:function(e,a,t){var n=t(8355);n.A.defaults.baseURL="https://localhost:44306/api/";const o={get:async function(e){try{let a=localStorage.getItem("accessToken");a&&(n.A.defaults.headers.common["Authorization"]="Bearer "+a);const t=await n.A.get(`${e}`);return t}catch(a){throw a}},post:async function(e,a={},t={}){try{let o=localStorage.getItem("accessToken");o&&(n.A.defaults.headers.common["Authorization"]="Bearer "+o);const r=await n.A.post(`${e}`,a,t);return r}catch(o){throw o}},put:async function(e,a={}){try{let t=localStorage.getItem("accessToken");t&&(n.A.defaults.headers.common["Authorization"]="Bearer "+t);const o=await n.A.put(`${e}`,a);return o}catch(t){throw t}},delete:async function(e){try{let a=localStorage.getItem("accessToken");a&&(n.A.defaults.headers.common["Authorization"]="Bearer "+a);const t=await n.A.delete(`${e}`);return t}catch(a){throw a}}};a.A=o},2220:function(e,a,t){t.r(a),t.d(a,{default:function(){return w}});var n=t(6768),o=t(5130);const r=e=>((0,n.Qi)("data-v-1a416130"),e=e(),(0,n.jt)(),e),i=r((()=>(0,n.Lk)("span",null," Hệ thống",-1))),l=r((()=>(0,n.Lk)("span",null," Danh mục dùng chung",-1)));function s(e,a,t,r,s,c){const d=(0,n.g2)("font-awesome-icon"),u=(0,n.g2)("a-breadcrumb-item"),g=(0,n.g2)("a-breadcrumb"),h=(0,n.g2)("a-page-header"),p=(0,n.g2)("a-col"),m=(0,n.g2)("a-row"),f=(0,n.g2)("a-button"),b=(0,n.g2)("a-input"),y=(0,n.g2)("a-tooltip"),k=(0,n.g2)("a-popconfirm"),F=(0,n.g2)("a-space"),C=(0,n.g2)("a-table"),_=(0,n.g2)("a-pagination"),v=(0,n.g2)("a-card"),S=(0,n.g2)("ModalCreate"),A=(0,n.g2)("ModalUpdate");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(m,null,{default:(0,n.k6)((()=>[(0,n.bF)(p,{xs:24,sm:24,md:24,lg:24,xl:24},{default:(0,n.k6)((()=>[(0,n.bF)(h,{style:{border:"1px solid rgb(235, 237, 240)",height:"min-content","background-color":"#fff","margin-bottom":"16px"},title:"Dữ liệu danh mục",onBack:c.goBack},{extra:(0,n.k6)((()=>[(0,n.bF)(g,{separator:">"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{href:""},{default:(0,n.k6)((()=>[(0,n.bF)(d,{icon:"fa-solid fa-house"})])),_:1}),(0,n.bF)(u,{href:""},{default:(0,n.k6)((()=>[(0,n.bF)(d,{icon:["fas","gear"]}),i])),_:1}),(0,n.bF)(u,null,{default:(0,n.k6)((()=>[(0,n.bF)(d,{icon:"fa-solid fa-list"}),l])),_:1})])),_:1})])),_:1},8,["onBack"])])),_:1})])),_:1}),(0,n.bF)(o.eB,{name:"route",mode:"out-in",appear:""},{default:(0,n.k6)((()=>[(0,n.bF)(m,null,{default:(0,n.k6)((()=>[(0,n.bF)(p,{xs:24,sm:24,md:24,lg:24,xl:24},{default:(0,n.k6)((()=>[(0,n.bF)(v,{bordered:!0,title:this.nameParentCategory,"onUpdate:title":a[3]||(a[3]=e=>this.nameParentCategory=e),style:{margin:"30px",height:"600px"}},{extra:(0,n.k6)((()=>[(0,n.bF)(f,{onClick:c.openModalCreate,type:"primary"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{icon:"fa-solid fa-plus"}),(0,n.eW)(" Thêm mới")])),_:1},8,["onClick"])])),default:(0,n.k6)((()=>[(0,n.bF)(m,{style:{"margin-bottom":"20px"},gutter:24},{default:(0,n.k6)((()=>[(0,n.bF)(p,{span:12},{default:(0,n.k6)((()=>[(0,n.bF)(b,{value:s.formSearch.code_Filter,"onUpdate:value":a[0]||(a[0]=e=>s.formSearch.code_Filter=e),onKeyup:(0,o.jR)(c.SearchData,["enter"]),placeholder:"Mã dữ liệu danh mục"},null,8,["value","onKeyup"])])),_:1}),(0,n.bF)(p,{span:12},{default:(0,n.k6)((()=>[(0,n.bF)(b,{value:s.formSearch.name_Filter,"onUpdate:value":a[1]||(a[1]=e=>s.formSearch.name_Filter=e),onKeyup:(0,o.jR)(c.SearchData,["enter"]),placeholder:"Tên dữ liệu danh mục"},null,8,["value","onKeyup"])])),_:1})])),_:1}),(0,n.bF)(m,null,{default:(0,n.k6)((()=>[(0,n.bF)(p,{xs:24,sm:24,md:24,lg:24,xl:24},{default:(0,n.k6)((()=>[(0,n.bF)(C,{columns:s.tableColumns,dataSource:s.dataSourceTable,pagination:!1,loading:s.loadingTable,scroll:{x:1e3},"row-class-name":(e,a)=>a%2===1?"table-striped":null,onChange:e.handleTableChange},{bodyCell:(0,n.k6)((({column:e,record:a})=>["action"===e.key?((0,n.uX)(),(0,n.Wv)(F,{key:0},{default:(0,n.k6)((()=>[(0,n.bF)(y,{title:"Chỉnh sửa"},{default:(0,n.k6)((()=>[(0,n.bF)(f,{type:"link",shape:"circle",onClick:e=>c.openModalUpdate(a.id)},{icon:(0,n.k6)((()=>[(0,n.bF)(d,{icon:"fa-solid fa-pen-to-square",style:{color:"#ffd43b"}})])),_:2},1032,["onClick"])])),_:2},1024),(0,n.bF)(k,{title:"Xác nhận xóa?","ok-text":"Xóa","cancel-text":"Hủy",onConfirm:e=>c.deleteObj(a.id)},{default:(0,n.k6)((()=>[(0,n.bF)(y,{title:"Xóa",placement:"rightBottom"},{default:(0,n.k6)((()=>[(0,n.bF)(f,{type:"link",shape:"circle"},{icon:(0,n.k6)((()=>[(0,n.bF)(d,{icon:"fa-solid fa-trash-alt",style:{color:"#ff4d4f"}})])),_:1})])),_:1})])),_:2},1032,["onConfirm"])])),_:2},1024)):(0,n.Q3)("",!0)])),_:1},8,["columns","dataSource","loading","row-class-name","onChange"])])),_:1})])),_:1}),(0,n.bF)(m,null,{default:(0,n.k6)((()=>[(0,n.bF)(p,{span:24},{default:(0,n.k6)((()=>[s.pagination.total>0?((0,n.uX)(),(0,n.Wv)(_,{key:0,style:{"margin-top":"20px","text-align":"center"},current:s.pagination.current,"onUpdate:current":a[2]||(a[2]=e=>s.pagination.current=e),pageSize:s.pagination.pageSize,total:s.pagination.total,showSizeChanger:!1,"show-total":e=>`Tổng ${e} bản ghi`,onChange:c.handlePaginationChange},null,8,["current","pageSize","total","show-total","onChange"])):(0,n.Q3)("",!0)])),_:1})])),_:1})])),_:1},8,["title"])])),_:1})])),_:1})])),_:1}),(0,n.bF)(S,{parentId:e.$route.params.id,onAddSuccess:a[4]||(a[4]=a=>c.fetchData(s.pagination.current,s.pagination.pageSize,{parentId_Filter:e.$route.params.id})),ref:"modalCreate"},null,8,["parentId"]),(0,n.bF)(A,{onUpdateSuccess:a[5]||(a[5]=a=>c.fetchData(s.pagination.current,s.pagination.pageSize,{parentId_Filter:e.$route.params.id})),ref:"modalUpdate"},null,512)],64)}function c(e,a,t,o,r,i){const l=(0,n.g2)("a-input"),s=(0,n.g2)("a-form-item"),c=(0,n.g2)("a-textarea"),d=(0,n.g2)("a-button"),u=(0,n.g2)("a-form"),g=(0,n.g2)("a-modal");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(g,{open:r.open,"onUpdate:open":a[3]||(a[3]=e=>r.open=e),title:"Thêm dữ liệu danh mục",footer:null},{default:(0,n.k6)((()=>[(0,n.bF)(u,{ref:"formRef",model:o.category,layout:"vertical"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{ref:"code",label:"Mã",name:"code",rules:[{required:!0,message:"Vui lòng nhập thông tin này",trigger:"change"},{min:5,max:20,message:"Độ dài từ 5-20",trigger:"blur"}]},{default:(0,n.k6)((()=>[(0,n.bF)(l,{value:o.category.code,"onUpdate:value":a[0]||(a[0]=e=>o.category.code=e),onInput:i.formatInput},null,8,["value","onInput"])])),_:1},512),(0,n.bF)(s,{ref:"name",label:"Tên ",name:"name",rules:[{required:!0,message:"Vui lòng nhập thông tin này",trigger:"change"},{min:5,max:50,message:"Độ dài từ 5-50",trigger:"blur"}]},{default:(0,n.k6)((()=>[(0,n.bF)(l,{value:o.category.name,"onUpdate:value":a[1]||(a[1]=e=>o.category.name=e)},null,8,["value"])])),_:1},512),(0,n.bF)(s,{ref:"description",label:"Mô tả",name:"description"},{default:(0,n.k6)((()=>[(0,n.bF)(c,{value:o.category.description,"onUpdate:value":a[2]||(a[2]=e=>o.category.description=e)},null,8,["value"])])),_:1},512),(0,n.bF)(s,null,{default:(0,n.k6)((()=>[(0,n.bF)(d,{onClick:i.handleSubmitAsync,disabled:o.disableBtnSubmit,loading:o.isLoading,type:"primary",style:{"margin-right":"20px"},class:"login-form-button"},{default:(0,n.k6)((()=>[(0,n.eW)(" Hoàn thành ")])),_:1},8,["onClick","disabled","loading"]),(0,n.bF)(d,{type:"normal",onClick:i.closeModal,style:{"margin-right":"20px"},class:"login-form-button"},{default:(0,n.k6)((()=>[(0,n.eW)(" Đóng ")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1},8,["open"])])}var d=t(3910),u=t(144),g={props:{parentId:String},setup(e){const a=(0,u.Kh)({name:"",code:"",description:"",parentId:e.parentId}),t=(0,n.EW)((()=>""==a.name||""==a.code));return{category:a,isLoading:!1,labelCol:{span:6},wrapperCol:{span:14},disableBtnSubmit:t}},data(){return{open:!1}},methods:{formatInput(e){let a=e.target.value.toUpperCase();a=a.replace(/\s+/g,""),a=a.replace(/[^A-Z0-9_-]/g,""),this.category.code=a},showModal(){this.open=!0},closeModal(){this.open=!1,this.$refs.formRef.resetFields()},handleOk(){console.log(this.category)},async handleSubmitAsync(){this.$refs.formRef.validate().then((async()=>{this.isLoading=!0,console.log(this.category);const e=await d.A.post("datacategory/create",this.category);"Tạo mới thành công"==e.data.message?(this.$message.success(e.data.message),this.isLoading=!1,this.closeModal(),this.$emit("addSuccess")):(this.isLoading=!1,this.$message.error(e.data.message))})).catch((e=>{console.log("error",e)})).finally((()=>{this.isLoading=!1}))}}},h=t(1241);const p=(0,h.A)(g,[["render",c]]);var m=p;function f(e,a,t,o,r,i){const l=(0,n.g2)("a-input"),s=(0,n.g2)("a-form-item"),c=(0,n.g2)("a-textarea"),d=(0,n.g2)("a-button"),u=(0,n.g2)("a-form"),g=(0,n.g2)("a-modal");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(g,{open:r.open,"onUpdate:open":a[3]||(a[3]=e=>r.open=e),title:"Cập nhật danh mục",footer:null},{default:(0,n.k6)((()=>[(0,n.bF)(u,{ref:"formRef",model:r.category,layout:"vertical"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{ref:"code",label:"Mã danh mục",name:"code"},{default:(0,n.k6)((()=>[(0,n.bF)(l,{value:r.category.code,"onUpdate:value":a[0]||(a[0]=e=>r.category.code=e),onInput:i.formatInput,rules:[{required:!0,message:"Mã danh mục là bắt buộc",trigger:"change"},{min:5,max:20,message:"Độ dài từ 5-20",trigger:"blur"}]},null,8,["value","onInput"])])),_:1},512),(0,n.bF)(s,{ref:"name",label:"Tên danh mục",name:"name"},{default:(0,n.k6)((()=>[(0,n.bF)(l,{value:r.category.name,"onUpdate:value":a[1]||(a[1]=e=>r.category.name=e),rules:[{required:!0,message:"Tên danh mục là bắt buộc",trigger:"change"},{min:5,max:50,message:"Độ dài từ 5-50",trigger:"blur"}]},null,8,["value"])])),_:1},512),(0,n.bF)(s,{ref:"description",label:"Mô tả",name:"description"},{default:(0,n.k6)((()=>[(0,n.bF)(c,{value:r.category.description,"onUpdate:value":a[2]||(a[2]=e=>r.category.description=e)},null,8,["value"])])),_:1},512),(0,n.bF)(s,null,{default:(0,n.k6)((()=>[(0,n.bF)(d,{onClick:i.handleSubmitAsync,loading:r.isLoading,type:"primary",style:{"margin-right":"20px"},class:"login-form-button"},{default:(0,n.k6)((()=>[(0,n.eW)(" Hoàn thành ")])),_:1},8,["onClick","loading"]),(0,n.bF)(d,{type:"normal",onClick:i.closeModal,style:{"margin-right":"20px"},class:"login-form-button"},{default:(0,n.k6)((()=>[(0,n.eW)(" Đóng ")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1},8,["open"])])}var b={setup(){},data(){const e=(0,u.Kh)({name:"",code:"",description:""});return{id:void 0,category:e,isLoading:!1,labelCol:{span:6},wrapperCol:{span:14},open:!1}},methods:{formatInput(e){let a=e.target.value.toUpperCase();a=a.replace(/\s+/g,""),a=a.replace(/[^A-Z0-9_-]/g,""),this.category.code=a},async showModal(e){this.open=!0;const a=await d.A.get(`datacategory/${e}`);this.category=a.data.data,this.id=e},closeModal(){this.open=!1,this.$refs.formRef.resetFields()},handleOk(){console.log(this.category)},async handleSubmitAsync(){this.$refs.formRef.validate().then((async()=>{this.isLoading=!0;const e=await d.A.put(`datacategory/update/${this.id}`,this.category);"Cập nhật thành công"==e.data.message?(this.$message.success(e.data.message),this.closeModal()):this.$message.error(e.data.message),this.isLoading=!1,this.$emit("updateSuccess")})).catch((e=>{console.log("error",e)})).finally((()=>{this.isLoading=!1}))}}};const y=(0,h.A)(b,[["render",f]]);var k=y,F=t(9769),C=t(7694),_=t(7816),v=t(5389),S={components:{SmileOutlined:_.A,DownOutlined:v.A,Pagination:F.Ay,ModalCreate:m,ModalUpdate:k},data(){return{nameParentCategory:"",tableColumns:[{title:"Mã",dataIndex:"code",key:"code",width:"15%",sorter:!1},{title:"Tên",dataIndex:"name",key:"name",width:"15%",sorter:!1},{title:"Mô tả",dataIndex:"description",key:"description",width:"30%"},{title:"Hành động",dataIndex:"action",key:"action",width:"10%"}],dataSourceTable:[],loadingTable:!1,pagination:{current:1,pageSize:5,total:0},formSearch:{parentId_Filter:"",code_Filter:"",name_Filter:""}}},async mounted(){var e={parentId_Filter:this.$route.params.id};this.formSearch.parentId_Filter=this.$route.params.id;(0,n.WQ)("selectedMenu");const a=(0,n.WQ)("changeSelectedMenu");"DataCategoryHome"==this.$route.name&&a("Category"),this.fetchData(this.pagination.current,this.pagination.pageSize,e);const t=await d.A.get(`category/${this.$route.params.id}`);this.nameParentCategory=t.data.data.name},methods:{goBack(){this.$router.go(-1)},openModalCreate(){this.$refs.modalCreate.showModal()},async deleteObj(e){try{const a=await d.A.delete(`datacategory/soft-delete/${e}`);"Xóa thành công"==a.data.message?(C.Ay.success("Xóa thành công"),1===this.dataSourceTable.length&&(this.pagination.current=Math.max(1,this.pagination.current-1)),this.fetchData(this.pagination.current,this.pagination.pageSize,{parentId_Filter:this.$route.params.id})):C.Ay.error("Xóa thất bại")}catch(a){C.Ay.error("Xóa thất bại")}},handlePaginationChange(){this.fetchData(this.pagination.current,this.pagination.pageSize)},SearchData(){this.fetchData(this.pagination.current,this.pagination.pageSize,this.formSearch)},async fetchData(e,a,t){this.loadingTable=!0;var n={...t,pageIndex:e,pageSize:a};try{const e=await d.A.post("/datacategory/get-data-by-page",n);this.dataSourceTable=e.data.data.items,this.pagination.total=e.data.data.totalCount,this.pagination.current=e.data.data.pageIndex,this.pagination.pageSize=e.data.data.pageSize}catch(o){C.Ay.error(o)}this.loadingTable=!1},openModalUpdate(e){this.$refs.modalUpdate.showModal(e)}}};const A=(0,h.A)(S,[["render",s],["__scopeId","data-v-1a416130"]]);var w=A}}]);
//# sourceMappingURL=220.a55e41c0.js.map